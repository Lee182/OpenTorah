var fs = require('fs')
fs.readdir(__dirname, function(err, dir) {
  if (err) {console.error(err); return null;}
  dir = dir.filter(function(file) {
    return file !== 'index.js' && file !== '_genIndex.js'
  })
  genIndex(dir)
})
function genIndex(arr) {
  var str = "// Generated by _genIndex.js\nvar arr = "+ JSON.stringify(arr) + "\narr.forEach(function(file){\n  var key = file.substr(0, file.length-3); \n  module.exports[key] = require(__dirname +'/'+ file) \n})"
  fs.writeFile(__dirname + '/index.js', str, 'utf8', function(err){
    if (err){console.error(err)}
  })
}
